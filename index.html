<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>Gitar Nota Tahmin Oyunu</title>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; 
            background: #1a1a2e; color: white; text-align: center; margin: 0; padding: 10px; 
        }
        
        /* Ana KapsayÄ±cÄ± - Mobil iÃ§in geniÅŸlik %95 yapÄ±ldÄ± */
        .container { 
            width: 95%;
            max-width: 1000px; 
            margin: auto; 
            background: #16213e; 
            padding: 20px; 
            border-radius: 20px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); 
        }

        .header-panel { 
            display: flex; justify-content: space-around; background: #0f3460; 
            padding: 15px; border-radius: 10px; margin-bottom: 20px; 
        }
        .stat span { color: #e94560; font-size: 24px; font-weight: bold; }

        #hedef-alani {
            background: #0f3460; padding: 25px; border-radius: 15px; 
            margin-bottom: 20px; border: 3px solid #e94560; min-height: 120px;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            position: relative;
        }
        #hedef-nota { font-size: 50px; color: #ffba08; font-weight: 900; }
        #bilgi-notu { font-size: 14px; color: #888; margin-bottom: 5px; text-transform: uppercase; }

        /* MOBÄ°L KAYDIRMA Ã–ZELLÄ°ÄžÄ° BURADA BAÅžLIYOR */
        .klavye-container { 
            position: relative; 
            display: block; 
            background: #333;
            border: 4px solid #533483; 
            border-radius: 10px; 
            overflow-x: auto; /* Yatay kaydÄ±rma Ã§ubuÄŸunu aÃ§ar */
            -webkit-overflow-scrolling: touch; /* Mobilde pÃ¼rÃ¼zsÃ¼z kaydÄ±rma saÄŸlar */
            opacity: 0.3; 
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .oyun-aktif { pointer-events: auto !important; opacity: 1 !important; }

        /* Gitar resminin mobilde Ã§ok kÃ¼Ã§Ã¼lmesini engelliyoruz */
        #gitar-resmi { 
            min-width: 900px; /* PC geniÅŸliÄŸini koruyoruz ki notalar tÄ±klanabilsin */
            width: 100%; 
            height: auto;
            display: block; 
        }

        /* Nota noktalarÄ± mobilde dokunma kolaylÄ±ÄŸÄ± iÃ§in bÃ¼yÃ¼tÃ¼ldÃ¼ */
        .nota-noktasi {
            position: absolute; 
            width: 36px; 
            height: 36px;
            background: rgba(233, 69, 96, 0.7); 
            border: 2px solid white;
            border-radius: 50%; 
            cursor: pointer; 
            transform: translate(-50%, -50%); 
            z-index: 100;
        }
        
        .nota-noktasi:hover { background: #2ecc71; transform: translate(-50%, -50%) scale(1.1); }

        #timer-bar {
            position: absolute; bottom: 0; left: 0; height: 8px;
            background: #4eeaf6; width: 0%; transition: width 0.1s linear;
        }

        .btn-start { 
            padding: 15px 40px; font-size: 20px; background: #2ecc71; 
            color: white; border: none; border-radius: 12px; cursor: pointer; font-weight: bold;
        }

        /* Dikey modda uyarÄ± yazÄ±sÄ± */
        @media screen and (max-width: 600px) and (orientation: portrait) {
            #hedef-alani::before {
                content: "ðŸ“± Daha iyi bir deneyim iÃ§in telefonu yan Ã§evirip kaydÄ±rÄ±n!";
                display: block; font-size: 11px; color: #ffba08; margin-bottom: 8px;
            }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header-panel">
        <div class="stat">Puan: <span id="puan">0</span></div>
        <div class="stat">Hak: <span id="hak">3</span></div>
        <div class="stat">En YÃ¼ksek: <span id="best">0</span></div>
    </div>

    <div id="hedef-alani">
        <div id="start-overlay">
            <button class="btn-start" onclick="oyunuBaslat()">OYUNU BAÅžLAT</button>
        </div>
        <div id="game-ui" style="display: none;">
            <div id="bilgi-notu">NOTAYI BUL:</div>
            <div id="hedef-nota">-</div>
        </div>
        <div id="timer-bar"></div>
    </div>

    <div class="klavye-container" id="klavye" style="pointer-events: none;">
        <img id="gitar-resmi" src="gitar.jpg" onerror="this.src='https://via.placeholder.com/900x300/333/fff?text=Gitar+Resmi+Yukleniyor...';">
        
        <div class="nota-noktasi" style="top: 35.3%; left: 70.59%;" onclick="kontrol('MÄ°')"></div>
        <div class="nota-noktasi" style="top: 42.07%; left: 70.81%;" onclick="kontrol('LA')"></div>
        <div class="nota-noktasi" style="top: 48.18%; left: 70.59%;" onclick="kontrol('RE')"></div>
        <div class="nota-noktasi" style="top: 55.82%; left: 70.59%;" onclick="kontrol('SOL')"></div>
        <div class="nota-noktasi" style="top: 62.37%; left: 70.7%;" onclick="kontrol('SÄ°')"></div>
        <div class="nota-noktasi" style="top: 68.48%; left: 70.7%;" onclick="kontrol('MÄ°')"></div>
        <div class="nota-noktasi" style="top: 35.3%; left: 60.9%;" onclick="kontrol('FA')"></div>
        <div class="nota-noktasi" style="top: 42.07%; left: 49.01%;" onclick="kontrol('SÄ°')"></div>
        <div class="nota-noktasi" style="top: 48.4%; left: 49.23%;" onclick="kontrol('MÄ°')"></div>
        <div class="nota-noktasi" style="top: 55.6%; left: 49.12%;" onclick="kontrol('LA')"></div>
        <div class="nota-noktasi" style="top: 62.37%; left: 61.01%;" onclick="kontrol('DO')"></div>
        <div class="nota-noktasi" style="top: 69.36%; left: 61.12%;" onclick="kontrol('FA')"></div>
        <div class="nota-noktasi" style="top: 34.64%; left: 35.68%;" onclick="kontrol('SOL')"></div>
        <div class="nota-noktasi" style="top: 41.85%; left: 35.68%;" onclick="kontrol('DO')"></div>
        <div class="nota-noktasi" style="top: 48.83%; left: 35.79%;" onclick="kontrol('FA')"></div>
        <div class="nota-noktasi" style="top: 56.26%; left: 24.12%;" onclick="kontrol('SÄ°')"></div>
        <div class="nota-noktasi" style="top: 63.46%; left: 35.79%;" onclick="kontrol('RE')"></div>
        <div class="nota-noktasi" style="top: 69.57%; left: 35.79%;" onclick="kontrol('SOL')"></div>
        <div class="nota-noktasi" style="top: 34.21%; left: 13.66%;" onclick="kontrol('LA')"></div>
        <div class="nota-noktasi" style="top: 41.41%; left: 13.55%;" onclick="kontrol('RE')"></div>
        <div class="nota-noktasi" style="top: 49.05%; left: 13.55%;" onclick="kontrol('SOL')"></div>
        <div class="nota-noktasi" style="top: 56.04%; left: 13.55%;" onclick="kontrol('DO')"></div>
        <div class="nota-noktasi" style="top: 63.68%; left: 13.44%;" onclick="kontrol('MÄ°')"></div>
        <div class="nota-noktasi" style="top: 70.67%; left: 13.33%;" onclick="kontrol('LA')"></div>
    </div>
</div>

<script>
    let puan = 0, hak = 3, mevcutHedef = "", sÃ¼re = 50, zamanlayÄ±cÄ±;
    let enYuksekSkor = localStorage.getItem('gitarEnYuksek') || 0;
    const notalar = ['DO', 'RE', 'MÄ°', 'FA', 'SOL', 'LA', 'SÄ°'];
    document.getElementById('best').innerText = enYuksekSkor;

    let audioCtx;
    function initAudio() { if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)(); }
    
    function sesCal(freq) {
        if (!audioCtx) return;
        const osc = audioCtx.createOscillator(); const gain = audioCtx.createGain();
        osc.connect(gain); gain.connect(audioCtx.destination);
        osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
        osc.start(); osc.stop(audioCtx.currentTime + 0.3);
    }

    function oyunuBaslat() {
        initAudio();
        document.getElementById('start-overlay').style.display = 'none';
        document.getElementById('game-ui').style.display = 'block';
        document.getElementById('klavye').classList.add('oyun-aktif');
        document.getElementById('klavye').style.pointerEvents = "auto";
        yeniSoru();
    }

    function yeniSoru() {
        if (hak <= 0) return;
        clearInterval(zamanlayÄ±cÄ±);
        sÃ¼re = 50;
        mevcutHedef = notalar[Math.floor(Math.random() * notalar.length)];
        
        document.getElementById('bilgi-notu').innerText = "NOTAYI BUL:";
        document.getElementById('bilgi-notu').style.color = "#888";
        document.getElementById('hedef-nota').innerText = mevcutHedef;
        document.getElementById('hedef-nota').style.color = "#ffba08";
        document.getElementById('timer-bar').style.width = "100%";

        zamanlayÄ±cÄ± = setInterval(() => {
            sÃ¼re--;
            document.getElementById('timer-bar').style.width = (sÃ¼re * 2) + "%";
            if (sÃ¼re <= 0) hataYap("SÃœRE DOLDU!");
        }, 100);
    }

    function kontrol(tiklanan) {
        if (hak <= 0 || sÃ¼re <= 0) return;
        
        if (tiklanan === mevcutHedef) {
            puan += 10; sesCal(880);
            document.getElementById('puan').innerText = puan;
            
            document.getElementById('bilgi-notu').innerText = "TEBRÄ°KLER!";
            document.getElementById('bilgi-notu').style.color = "#2ecc71";
            document.getElementById('hedef-nota').innerText = "DOÄžRU âœ…";
            document.getElementById('hedef-nota').style.color = "#2ecc71";
            
            if(puan > enYuksekSkor) {
                enYuksekSkor = puan;
                localStorage.setItem('gitarEnYuksek', enYuksekSkor);
                document.getElementById('best').innerText = enYuksekSkor;
            }
            clearInterval(zamanlayÄ±cÄ±);
            setTimeout(yeniSoru, 1000);
        } else {
            hataYap("YANLIÅž! (" + tiklanan + ")");
        }
    }

    function hataYap(msg) {
        clearInterval(zamanlayÄ±cÄ±);
        hak--; sesCal(220);
        document.getElementById('hak').innerText = hak;
        
        document.getElementById('bilgi-notu').innerText = "ÃœZGÃœNÃœM";
        document.getElementById('bilgi-notu').style.color = "#e94560";
        document.getElementById('hedef-nota').innerText =
